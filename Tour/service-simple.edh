
import * 'net'

{
  server = Server(
    'net/demo/service', # the service module
    '127.0.0.1', # local addr to bind
    3721, # local port to bind
  )

  # this waits the server to start listening and returns actual addresses
  case server.addrs() of { addr :> extraAddrs }
  -> console.info<| 'Demo service listening: ' ++ addr

  # this waits the server to be stopped, or rethrows any failure
  # the server encountered
  server.join()
}
